**오늘 한 일:**

* ​



**내일 할 일:**

* ​



## 회고



# 웹자판기 리팩토링

티몬 과제를 하고 난 후 전체적인 리팩토링이 필요할 것 같아 웹 자판기를 다시 짰다.

다음을 중점으로 뒀다.

1. 음료 데이터는 동적 데이터로 따로 분류한다: 생각해보면 당연한 얘기. 음료는 언제든지 바뀔 수 있다
2. 불필요하게 사용한 클래스를 없앤다: class와 id를 이해하고 사용하자
   * 스타일에는 id를 사용하지 말자. specificity가 높아 재사용성이 떨어진다
   * important를 사용하지 말자
3. **클래스의 역할을 명확히 한다** : 이벤트 등록은 이벤트가 발생하는 객체에서 이루어 질 수 있도록 한다
   * vendingmachine: 템플릿과 동적데이터를 받는다
   * wallet
   * action: 두 객체를 조작한다
4. 에러 상황을 명확히 한다.
   * 잘못된 번호 입력과 금액 부족은 에러가 아니다. 로깅을 하거나 alert을 발생시키자



루미와 크롱의 방법으로 다시 짜보기로 함

1. **시나리오(use case)를 뽑아낸다** (문장으로)
2. **구조를 구현한다.** 메소드 명은 시나리오를 바탕으로
3. use case와 구조를 바탕으로 **의존성을 생성한다**



## use case

**basic flow**

지갑에서 돈을 꺼낸다

1. 지갑의 돈 버튼을 클릭한다
2. 지갑의 돈의 개수가 감소한다
3. 지갑의 총 금액이 감소한다
4. 감소한 금액을 자판기에 투입한다

자판기에 금액을 투입한다

1. 자판기의 전체 금액이 증가한다
2. 투입한 금액이 로그로 남는다
3. 뽑을 수 있는 음료가 하이라이팅 된다
   - 하이라이트할 엘리먼트들(dt태그)을 모아두는 방법
     - 장점: class조작에 용이
     - 단점: render이후에 엘리먼트들을 모아야 된다, 
   - itemList를 변수에 담아놓는 방법
     - 장점: render 이전에도 값을 담아둘 수 있다.
     - 단점: class조작 불편

음료를 선택한다

1. 음료를 찾는다
2. 선택된 음료가 로그에 찍힌다
3. 자판기의 총 금액이 감소한다
4. 뽑을 수 있는 음료가 다시 하이라이팅 된다

잔돈을 반환한다

1. 3초간 아무 버튼을 누르지 않는다
2. 자판기의 금액을 모두 감소시킨다
3. 감소된 금액을 지갑에 되돌려 넣는다
4. 뽑을 수 있는 음료가 다시 하이라이팅 된다
5. 감소된 금액을 로그에 찍는다

반환된 잔돈을 지갑에 넣는다: 

1. 반환된 돈은 큰 단위 순으로 나눈다
2. 각 단위만큼 금액의 개수를 증가시킨다
3. 총 금액을 증가시킨다

**exception flow**

지갑에서 부족한 금액을 선택한다

1. 지갑의 돈 버튼을 클릭한다
2. 지갑의 돈의 개수가 모자름을 확인한다
3. 콘솔창에 돈이 부족하다고 출력한다

자판기의 잘못된 번호를 입력한다

1. 번호를 누른다
2. 선택된 번호에 해당되는 음료가 없음을 확인한다
3. 콘솔창에 잘못된 번호를 입력했다고 알린다

자판기의 금액보다 비싼 음료를 선택한다

1. 번호를 누른다
2. 해당되는 번호의 음료의 금액과 자판기의 금액을 비교한다
3. 콘솔창에 비싸다고 알린다



#### 고민

얼마나 추상화된 단계를 적어야 할까?

* (음료를 하이라이팅한다) or (모든 음료의 하이라이트를 끈다 > 자판기의 금액을 각 음료의 금액과 비교한다 > 음료를 하이라이팅 한다)



## 구조

자주 사용되는 메소드들

* 하이라이트
* 지갑의 총 금액 변화(?)