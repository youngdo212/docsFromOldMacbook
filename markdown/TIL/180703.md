**오늘 한 일:**

* 마크다운 에디터(진행): parser 설계
  * 적합한 데이터 구조 선택
  * 단계별 기능 구상(tokenizer, lexer, parser)
  * 설계...도중 막힘



**내일 할 일:**

* 마크다운 에디터 : 프로토타입 완성하기



## 회고

아직 설계에 얼만큼 시간적/정신적 비용을 소비해야 되는지 모르겠다. 하지만 확실하게 말할 수 있는 사실은 오늘은 과했다는 점? 설계단계에서 *1)많은 기능*을 *2)완벽하게* 풀어내려고 했다.

설계단계에서 고쳐야 할 점은

1. 2~3가지의 핵심 기능만 고려해라: 나머지는 추후에 확장
2. 생각 안나면 지금 상태로 일단 구현해라: 이런경우 고민해봤자 또 다른 문제가 발생하기 마련. 구현해보고 생각하자



# 마크다운 에디터

#### 고민

1. ast를 만든다

   - 장점: dom과 유사한 구조로서 엘리먼트 단위의 탐색 및 수정 용이
   - 단점: 데이터 구조 및 해석과정이 복잡하다.

2. 배열 구조

   ```
   {
       front: '<ul><li>',
       text: 'first',
       end: '</li></ul>
   }
   ```

   - 장점: 데이터 구조 및 해석과정이 단순하다. (작성구조와 동일하게 해석)
   - 단점: 엘리먼트 단위 조작이 힘들다, 파서가 없어지고 렉서가 비대해질 가능성

- 결정: 배열 구조

  - parser를 통해 만들어진 ast객체에서 엘리먼트 탐색을 할 이유가 없다.

  - 라이브 에디터를 만들기 위해 markdown과 markup의 일대일 줄대응을 하는게 더 좋다고 생각

  - 해석기가 필요없게 됨

  - 굳이 객체형태가 아니어도 될것같아 문자열로 다루기로 함

    ```
    ["<p>paragraph", "</p>", "<ul><li>first", "</li><li>second", "</li></ul>"]
    ```

    ​

#### 고민2

lexer에서 태그를 달아주는 과정까지는 문제없었다.

parser를 통해 문법구조를 형성하는 과정에서 불규칙적인 처리상황이 많이 발생했다. 생각했던것만큼 범용적인 문법구조 처리방법을 구현하는게 어려웠다. 게다가 토큰이 문자열이라서 토큰 핸들링이 더 어려웠다.

한편으로는 구현하기 전에 너무 고민을 많이한 것 같다는 생각도 했다. 설계과정이 당연히 중요하지만 적정선에서 끝내고 구현으로 들어갈 필요가 있다.

한 번에 너무 많은 기능을 담으려고 했던것도 구현이 더딘 이유이기도 했다.

내일은 기능을 핵심만 간추린 뒤에 현재 방법대로 빠르게 구현해보고 개선을 해보자!

(너무 tokenizer > lexer > parser 형태에 묶여있는건 아닌지 의심해볼만 하다.)